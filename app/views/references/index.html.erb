<% title "Bibliography", nil %>

<% content_for :breadcrumbs_section do %>
  <li><%= link_to 'Root', root_path %> <span class="divider">/</span></li>
  <li class="active">Bibliography</li>
<% end %>

<% content_for :main_section do %>
  <div class="span9">
    <div id="search-and-sort">
      <h5 class="muted">Filter &amp; Sort</h5>
      <%= search_form_for @search, html: { class: 'form-inline'} do |f| %>
        <div class="">
          <%= f.condition_fields do |c| %>
            Filter:
            <%= render "condition_fields", f: c %>
          <% end %>
        </div>
        <p><%= link_to_add_fields "Add Conditions", f, :condition %></p>
        <div class="row-fluid">
        <div class="span7">
          Sort:<br />
          <%= f.sort_fields do |s| %>
            <%= s.sort_select associations: [:authors, :book] %>
          <% end %>
        </div>
        <div class="span4">
          Results per Page:<br />
          <%= select_tag :per_page, options_for_select([5, 10, 20, 30, 50, 100], params[:per_page] ? params[:per_page] : 10) %>
        </div>
      </div>
        <div class="other-actions">
          <%= f.submit "Search", class: 'btn btn-info btn-block' %>
        </div>
      <% end %>
    </div>
    <%= render "bib_entries", :references => @references %>
    <%= will_paginate(@references, class: 'pagination pagination-centered', :renderer => WillPaginate::ActionView::BootstrapLinkRenderer) %>
  </div>

  <div class="span2 offset1">
    <%= render "shared/bibliographic_cat_navs", :obj => @references %>

  </div>

<% end %>