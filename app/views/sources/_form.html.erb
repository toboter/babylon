<%= form_for @source, html: {class: "form-horizontal"} do |f| %>
  <%= f.error_messages %>
  
  <div class="control-group">
    <%= f.label :source_type, class: 'control-label' %>
    <div class="controls">
      <%= f.select(:source_type, Source::SourceTypes) %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :author_id, class: 'control-label' %>
    <div class="controls">
      <%= f.collection_select(:author_id, Person.all, :id, :name, {include_blank: true}) %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :original_date, 'Date of action', class: 'control-label' %>
    <div class="controls">
      <div class="input-append date">
        <%= f.text_field :original_date, placeholder: 'Date', :'data-behaviour' => 'datepicker' %>
        <span class="add-on"><i class="icon-th"></i></span>
      </div>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :name, class: 'control-label' %>
    <div class="controls">
      <%= f.text_field :name %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :format, class: 'control-label' %>
    <div class="controls">
      <%= f.text_field :format %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :condition, class: 'control-label' %>
    <div class="controls">
      <%= f.text_field :condition %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :parent_id, class: 'control-label' %>
    <div class="controls">
      <%= f.collection_select(:parent_id, Source.possible_parents(@source), :id, :name, {include_blank: true}) %>
      <p>Should be blank, if the source is the original</p>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :institution_id, class: 'control-label' %>
    <div class="controls">
      <%= f.collection_select(:institution_id, Institution.all, :id, :name, {include_blank: true}) %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :comment, class: 'control-label' %>
    <div class="controls">
      <%= f.text_area :comment %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit "Speichern", :class => 'btn btn-primary' %>
  </div>

  <% content_for :edit_section do %>
    <div class="pull-right">
      <% if @source.new_record? %>
        <%= link_to 'Abbrechen', :back, :class => 'btn' %>
      <% else %>
        <%= link_to 'Abbrechen', @source, :class => 'btn' %>
      <% end %>
    </div>
  <% end %>

<% end %>
