<% title "Books", nil %>

<% content_for :breadcrumbs_section do %>
  <li><%= link_to 'Root', root_path %> <span class="divider">/</span></li>
  <li class="active">Books</li>
<% end %>

<% content_for :main_section do %>
  <div class="span9">
    
    <%= render "book_entries", :books => @books %>
    <%= will_paginate(@books, class: 'pagination pagination-centered', :renderer => WillPaginate::ActionView::BootstrapLinkRenderer) %>
  </div>
  <div class="span2 offset1">
    <% if can? :edit, @books %>
      <div class="btn-group pull-right" style="margin-left:100%;margin-bottom:20px;">
        <a class="btn dropdown-toggle btn-info" data-toggle="dropdown" href="#">
          <i class="icon-plus icon-white"></i>
          Add
          <span class="caret"></span>
        </a>
          <ul class="dropdown-menu">
            <li><%= link_to 'Book', new_book_path %></li>
            <li><%= link_to 'Single Resource', new_reference_path %></li>
          </ul>
      </div>
    <% end  %>

    <%= render "shared/bibliographic_cat_navs", :obj => @books %>
    <h5 class="muted">Filter by type</h5>
    <ul class="unstyled">
      <li><%= link_to "All books", books_path %> (<%= @books_all.count %>)</li>
      <li><%= link_to "Collections", books_path(:type => 'collections') %> (<%= @books_all.where('book_type NOT IN (?)', ['Monograph', 'Monograph in a serial']).count %>)</li>
      <li><%= link_to "Monographs", books_path(:type => 'monographs') %> (<%= @books_all.where('book_type IN (?)', ['Monograph', 'Monograph in a serial']).count %>)</li>
    </ul>
  </div>
<% end %>