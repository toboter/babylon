<% title "#{@bucket.name}", nil %>
<% edit_section_for(@bucket, @bucket.attachable) %>

<% content_for :breadcrumbs_section do %>
  <% unless @bucket.attachable_type == 'Page' %>
    <nav class="breadcrumbs">
      <%= link_to "#{@bucket.attachable.name}", @bucket.attachable unless @bucket.attachable_type == 'Person' %>
      <%= link_to "#{@bucket.attachable.fullname}", @bucket.attachable if @bucket.attachable_type == 'Person' %>
      <%= @bucket.name.present? ? (link_to "#{@bucket.name}", [@bucket.attachable, @bucket]) : 'Nothing' %>
    </nav>
  <% end %>
<% end %>

<% content_for :main_section do %>
  
  <div class="large-8 columns">
    <ul class="small-block-grid-2 large-block-grid-4">
      <% for asset in @bucket.assets.order('content_type DESC', 'name ASC') do %>
        <li>
          <% if asset.content_type.include? 'image' %>  
            <div class="image">
              <%= link_to (image_tag asset.assetfile.thumb.url), asset, class: "th radius" %>     
              <p>
                <%= link_to "#{asset.name}", asset %><% if can? :edit, @bucket %> | <%= link_to 'Set as cover', set_as_cover_bucket_path(@bucket, :cover_asset_id => asset), method: :put %><%= content_tag :span, ' (x)' if asset.id == @bucket.cover_asset_id %> | <%= link_to 'Delete from bucket', pailful_bucket_path(@bucket, :asset_id => asset), method: :delete, data: { confirm: 'Are you sure?' } %><% end %>
              </p>
            </div>
          <% else %>
            <div class="file">
              <%= link_to (image_tag 'dummy.svg'), asset, class: "th radius" %>
              <p>
                <%= asset.name %><% if can? :edit, @bucket %> | <%= link_to 'Delete from bucket', pailful_bucket_path(@bucket, :asset_id => asset), method: :delete, data: { confirm: 'Are you sure?' } %><% end %>
              </p>
            </div>
          <% end %>
        </li>
      <% end %>
    </ul>

    <% if can? :edit, @bucket %>
      <ul class="pricing-table">
        <li class="title">Assets</li>
        <li class="description">You can add assets, files, of every type you like.</li>
        <li class="bullet-item"><b>Content Types: </b>image, text, ...</li>
        <li class="cta-button"><%= link_to 'Add Assets', new_bucket_asset_path(@bucket), class: "button" %></li>
      </ul>
    <% end %>
  </div>
  <div class="large-3 columns offset-1">
    <h5 class="subheader">Info</h5>
    <ul class="no-bullet">
      <%= content_tag :li, @bucket.name if @bucket.name.present? %>
      <%= content_tag :li, 'Created by: '+@bucket.creator.available_name if @bucket.creator.present? %>
      <%= content_tag :li, 'Updated by: '+@bucket.creator.available_name if @bucket.updater.present? %>
    </ul>
  </div>
  

<% end %>

<% content_for :footer_section do %>

<% end %>